<form nz-form [formGroup]="validateForm" class="ant-advanced-search-form">
  <div nz-row [nzGutter]="24">
    <div nz-row>
      <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="Title">消息标题</nz-form-label>
            <nz-form-control>
              <input nz-input placeholder="消息标题" formControlName="Title" [(ngModel)]="searchListModel.Title" maxlength="10">
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="BasicType">消息类型</nz-form-label>
            <nz-form-control>        
              <nz-select nzMode="tags" formControlName="BasicType" nzPlaceHolder="消息类型" [(ngModel)]="searchListModel.BasicType">
                  <nz-option *ngFor="let option of listOfBasicType" [nzLabel]="option.Typename" [nzValue]="option.ID"></nz-option>
                </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="MsgTag">内容分类</nz-form-label>
            <nz-form-control>
              <nz-select nzMode="tags" formControlName="MsgTag" nzPlaceHolder="内容分类" [(ngModel)]="searchListModel.MsgTag">
                <nz-option *ngFor="let option of CategoryList" [nzLabel]="option.name" [nzValue]="option.id"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
    </div>
    <!--隐藏项-->
    <div *ngIf="!ishidden" >
      <div nz-row>
        <div nz-col [nzSpan]="8">
            <nz-form-item nzFlex>
              <nz-form-label [nzFor]="CreatorIds">创建人</nz-form-label>
              <nz-form-control>
                <input nz-input placeholder="创建人" formControlName="CreatorIds" [(ngModel)]="searchListModel.CreatorIds" maxlength="10">
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item nzFlex>
              <nz-form-label [nzFor]="'CreationTimeBegin'">创建时间</nz-form-label>
              <nz-form-control>
                <nz-date-picker formControlName="CreationTimeBegin"  [(ngModel)]="searchListModel.CreateDateFrom" nzFormat="yyyy-MM-dd"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item nzFlex>
              <nz-form-label [nzFor]="'CreationTimeEnd'">至</nz-form-label>
              <nz-form-control>
                <nz-date-picker formControlName="CreationTimeEnd" [(ngModel)]="searchListModel.CreateDateTo" nzFormat="yyyy-MM-dd"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
      </div>
      <div nz-row>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="SenderIds">发送状态</nz-form-label>
            <nz-form-control>
              <nz-select nzMode="tags" formControlName="SendStatus" nzPlaceHolder="发送状态" [(ngModel)]="searchListModel.SendStatus">
                  <nz-option *ngFor="let option of SendStatusList" [nzLabel]="option.name" [nzValue]="option.id"></nz-option>
                </nz-select>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="SendTimeBegin">发送时间</nz-form-label>
            <nz-form-control>
              <nz-date-picker formControlName="SendTimeBegin" [(ngModel)]="searchListModel.SendDateFrom"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="SendTimeEnd">至</nz-form-label>
            <nz-form-control>
              <nz-date-picker formControlName="SendTimeEnd" [(ngModel)]="searchListModel.SendDateTo"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
      <div nz-row>
        <div nz-col [nzSpan]="8">
            <nz-form-item nzFlex>
              <nz-form-label [nzFor]="Status">审批状态</nz-form-label>
              <nz-form-control>
                <nz-select nzMode="tags" formControlName="Status" nzPlaceHolder="审批状态" [(ngModel)]="searchListModel.Status">
                  <nz-option *ngFor="let option of StatusList" [nzLabel]="option.name" [nzValue]="option.id"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="8">
            <nz-form-item nzFlex>
              <nz-form-label [nzFor]="ApprovalTimeBegin">审批时间</nz-form-label>
              <nz-form-control>
                <nz-date-picker formControlName="ApprovalTimeBegin" [(ngModel)]="searchListModel.ApprovaDateFrom"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
        </div>
        <div nz-col [nzSpan]="8">
          <nz-form-item nzFlex>
            <nz-form-label [nzFor]="ApprovaTimeEnd">至</nz-form-label>
            <nz-form-control>
              <nz-date-picker formControlName="ApprovaTimeEnd" [(ngModel)]="searchListModel.ApprovaDateTo"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </div>
  </div>
  <div nz-row>
    <div nz-col [nzSpan]="24" style="text-align: right;">
        <a style="margin-left:8px;font-size:12px;" (click)="toggleCollapse()">
            {{searchbtn_name}}
            <i class="anticon" [class.anticon-down]="isCollapse" [class.anticon-up]="!isCollapse"></i>
          </a>
      <button nz-button [nzType]="'primary'" (click)="getMessageList(true)">搜索</button>
      <button nz-button (click)="resetForm()">清空</button>
      
    </div>
  </div>
</form>


<nz-table #ajaxTable  [nzFrontPagination]="false" [nzData]="dataSet" [nzLoading]="loading" [nzTotal]="total"
  [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize"
   (nzPageIndexChange)="getMessageList()"
    (nzPageSizeChange)="getMessageList(true)" >
  <thead (nzSortChange)="sort($event)" nzSingleSort>
    <tr>
      <th style="min-width: 300px">消息标题</th>
      <th>消息类型</th>
      <th>
        <span>内容分类</span>
      </th>
      <th>
        <span>创建人</span>
      </th>
      <th>
        <span>创建时间</span>
      </th>
      <th>
        <span>审批状态</span>
      </th>
      <th>
        <span>审批人</span>
      </th>
      <th>
        <span>审批日期</span>
      </th>
      <th>
        <span>发送状态</span>
      </th>
      <th>
        <span>发送时间</span>
      </th>
      <th style="min-width: 168px">
        <span>操作</span>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of ajaxTable.data">
      <td>{{data.Title}}</td>
      <td>{{fswitchTypename(data.TypeId)}}</td>
      <td>{{data.MessageTag}}</td>
      <td>{{data.CreatorName}}</td>
      <td>{{data.CreateDate}}</td>
      <td>{{data.ApprovalStateString}}</td>
      <td>{{data.ApproverName}}</td>
      <td>{{data.ApprovalTime}}</td>
      <td>{{data.SendState}}</td>
      <td>{{data.SendDate}}</td>
      <td>
        <a href="javascript:void(0);" (click)="ViewMessage(data.ID,data.TypeId,data.AppID)">查看</a>
        <nz-divider nzType="vertical"></nz-divider>
        <a (click)="copyMessage(data.ID,data.TypeId,data.AppID)">复制</a>
        <nz-divider nzType="vertical" *ngIf="data.ApprovalState==0 || data.ApprovalState==3"></nz-divider>
        <a *ngIf="data.ApprovalState==0 || data.ApprovalState==3" (click)="editMessage(data.ID,data.TypeId,data.AppID)">编辑</a></td>
    </tr>
  </tbody>
</nz-table>
<!-- <script>
  $(function(){
    $(document).scroll(function(){
        var top=$(document).scrollTop();
      console.log(top);
      if(top>0){
        $('.ant-advanced-search-form').addClass('.ant-form-sroll');
      }
      else{
        $('.ant-advanced-search-form').removeClass('.ant-form-sroll');
      }
  });  
  })
</script> -->
