<nz-tabset>
  <nz-tab nzTitle="多媒体消息">
    <nz-tabset [nzSelectedIndex]="SelectedIndex">
      <nz-tab nzTitle="图片" (nzClick)="changeTab(4)" [nzDisabled]='tpDisabled'>
          <form nz-form [formGroup]="validateForm" ><!--(ngSubmit)="submitForm()"-->
          <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="16">
              <nz-form-item>
                <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzRequired nzFor="tptitleCN" class="text-left">中文标题</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24">
                  <nz-input-group #tptitleCNNode [nzAddOnAfter]="tptitleCNWords">
                    <input nz-input formControlName="tptitleCN" id="tptitleCN" [(ngModel)]="messageItem.tptitleCN" maxlength="150"
                    (keyup)="commonService.changeWords(messageItem.tptitleCN, tptitleCNNode, 150)">
                </nz-input-group>
                  <nz-form-explain *ngIf="validateForm.get('tptitleCN').dirty && validateForm.get('tptitleCN').errors">请填写中文标题!</nz-form-explain>
                </nz-form-control>
              </nz-form-item>
              <nz-form-item>
                <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="tptitleEN" nzRequired class="text-left">英文标题</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24">
                    <nz-input-group #tptitleENNode [nzAddOnAfter]="tptitleENWords">
                  <input nz-input id="tptitleEN" formControlName="tptitleEN" [(ngModel)]="messageItem.tptitleEN" maxlength="150"
                  (keyup)="commonService.changeWords(messageItem.tptitleEN, tptitleENNode, 150)">
                  </nz-input-group>
                  <nz-form-explain *ngIf="validateForm.get('tptitleEN').dirty && validateForm.get('tptitleEN').errors">请填写英文标题!</nz-form-explain>
                </nz-form-control>
              </nz-form-item>
              <nz-form-item>
                  <!-- nzFileType="image/png,image/jpeg" -->
                <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="imgupload" nzRequired class="text-left">上传图片 图片不能超过2M,支持jpg,png格式</nz-form-label>
                <nz-form-control [nzSm]="14" [nzXs]="24">
                    <nz-upload 
                      nzAction="{{uploadUrl}}"  
                      [nzShowButton]="isShowButton"
                      nzListType="picture"
                      [nzBeforeUpload]="beforeUpload"
                      [nzLimit]=1
                      [nzRemove]="isRemove"
                      [nzFileList]="tpFileUrl"
                      (nzChange)="handleChange($event)">
                      <button nz-button>
                        <i class="anticon anticon-upload"></i><span>上传</span>
                      </button>
                    </nz-upload>
                   
                    <!--<nz-form-explain *ngIf="validateForm.get('imgupload').dirty && validateForm.get('imgupload').errors">
                      请上传图片!</nz-form-explain>-->
                </nz-form-control>
              </nz-form-item>
              </div>
              </div>
            </form>
        </nz-tab>
      <nz-tab nzTitle="音频" (nzClick)="changeTab(5)" [nzDisabled]='ypDisabled'>
          <form nz-form [formGroup]="validateForm" >
              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="16">
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzRequired nzFor="titleCN" class="text-left">中文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #yptitleCNNode [nzAddOnAfter]="yptitleCNWords">
                          <input nz-input formControlName="yptitleCN" id="yptitleCN" [(ngModel)]="messageItem.yptitleCN" maxlength="150"
                          (keyup)="commonService.changeWords(messageItem.yptitleCN, yptitleCNNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('yptitleCN').dirty && validateForm.get('yptitleCN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="yptitleEN" nzRequired class="text-left">英文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #yptitleENNode [nzAddOnAfter]="yptitleENWords">
                          <input nz-input formControlName="yptitleEN" id="yptitleEN" [(ngModel)]="messageItem.yptitleEN" maxlength="150"
                          (keyup)="commonService.changeWords(messageItem.yptitleEN, yptitleENNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('yptitleEN').dirty && validateForm.get('yptitleEN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="textMessageContentEN" nzRequired class="text-left">语音内容 格式支持amr,文件大小不超过2M</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-upload 
                      nzAction="{{uploadUrl}}"
                      [nzRemove]="fdelete"      
                      [nzShowButton]="isShowButton"
                      [nzListType]="text"
                      [nzBeforeUpload]="beforeUploadaudio"
                      [nzLimit]=1
                      [nzRemove]="isRemove"
                      [nzFileList]="ypFileUrl"
                      (nzChange)="handleChange($event)">
                      <button nz-button>
                        <i class="anticon anticon-upload"></i><span>上传</span>
                      </button>
                    </nz-upload>
                    
                    </nz-form-control>
                  </nz-form-item>
                  </div>
                  </div>
                </form>
      </nz-tab>
      <nz-tab nzTitle="视频" (nzClick)="changeTab(6)" [nzDisabled]='spDisabled'>
          <form nz-form [formGroup]="validateForm" >
              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="16">
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzRequired nzFor="sptitleCN" class="text-left">中文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #sptitleCNNode [nzAddOnAfter]="sptitleCNWords">
                          <input nz-input formControlName="sptitleCN" id="sptitleCN" [(ngModel)]="messageItem.sptitleCN" maxlength="150"
                          (keyup)="commonService.changeWords(messageItem.sptitleCN, sptitleCNNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('sptitleCN').dirty && validateForm.get('sptitleCN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="sptitleEN" nzRequired class="text-left">英文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #sptitleENNode [nzAddOnAfter]="sptitleENWords">
                        <input nz-input formControlName="sptitleEN" id="sptitleEN" [(ngModel)]="messageItem.sptitleEN" maxlength="150"
                        (keyup)="commonService.changeWords(messageItem.sptitleEN, sptitleENNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('sptitleEN').dirty && validateForm.get('sptitleEN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="textMessageContentEN" nzRequired class="text-left">上传视频 视频不能超过10M,支持mp4格式</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-upload 
                      nzAction="{{uploadUrl}}"
                      [nzRemove]="fdelete"      
                      [nzShowButton]="isShowButton"
                      [nzListType]="text"
                      [nzBeforeUpload]="beforeUploadvideo"
                      [nzLimit]=1
                      [nzRemove]="isRemove"
                      [nzFileList]="spFileUrl"
                      (nzChange)="handleChange($event)">
                      <button nz-button>
                        <i class="anticon anticon-upload"></i><span>上传</span>
                      </button>
                    </nz-upload>
                    
                    </nz-form-control>
                  </nz-form-item>
                  </div>
                  </div>
                </form>
      </nz-tab>
      <nz-tab nzTitle="附件" (nzClick)="changeTab(9)" [nzDisabled]='fjDisabled'>
          <form nz-form [formGroup]="validateForm">
              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="16">
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzRequired nzFor="titleCN" class="text-left">中文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #fjtitleCNNode [nzAddOnAfter]="fjtitleCNWords">
                        <input nz-input formControlName="fjtitleCN" id="fjtitleCN" [(ngModel)]="messageItem.fjtitleCN" maxlength="150"
                        (keyup)="commonService.changeWords(messageItem.fjtitleCN, fjtitleCNNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('fjtitleCN').dirty && validateForm.get('fjtitleCN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="fjtitleEN" nzRequired class="text-left">英文标题</nz-form-label>
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                        <nz-input-group #fjtitleENNode [nzAddOnAfter]="fjtitleENWords">
                        <input nz-input formControlName="fjtitleEN" id="fjtitleEN" [(ngModel)]="messageItem.fjtitleEN" maxlength="150"
                        (keyup)="commonService.changeWords(messageItem.fjtitleEN, fjtitleENNode, 150)">
                        </nz-input-group>
                        <nz-form-explain *ngIf="validateForm.get('fjtitleEN').dirty && validateForm.get('fjtitleEN').errors">请填写中文标题!</nz-form-explain>
                    </nz-form-control>
                  </nz-form-item>
                  <nz-form-item>
                    <nz-form-label [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" nzFor="textMessageContentEN" nzRequired class="text-left"> 附件内容 格式支持txt,doc,docx,xls,xlsx,pdf,文件大小不超过10M</nz-form-label>
                    <!-- ,ppt,pptx -->
                    <nz-form-control [nzSm]="14" [nzXs]="24">
                      <nz-upload              
                      [nzRemove]="fdelete"      
                      [nzShowButton]="isShowButton"
                      nzAction="{{uploadFileUrl}}"
                      [nzListType]="text"                      
                      [nzBeforeUpload]="beforeUploadtext"
                      [nzLimit]=1
                      [nzRemove]="isRemove"
                      [nzFileList]="fjFileUrl"
                      (nzChange)="handleChange($event)">
                      <button nz-button>
                        <i class="anticon anticon-upload"></i><span>上传</span>
                      </button>
                    </nz-upload>
                   
                    </nz-form-control>
                  </nz-form-item>
                  </div>
                  </div>
                </form>
      </nz-tab>
    </nz-tabset>
  </nz-tab>
  <nz-tab nzTitle="应用和收件人">
    <div nz-col [nzSpan]="16">
        <app-addressee></app-addressee>
    </div>
  </nz-tab>
</nz-tabset>

<div>

    <button nz-button nzType="primary" *ngIf="actionStr!='view'" [disabled]="!isCheckedButton" (click)="submitForm('save',false,0)">保存</button>
    <button nz-button nzType="primary" *ngIf="actionStr!='view'" [disabled]="!isCheckedButton" (click)="submitForm('send',false,0)">发送测试消息</button>
    <button nz-button nzType="primary" *ngIf="actionStr!='view'" [disabled]="!isCheckedButton" (click)="submitForm('submit',false,1)">提交</button>
    <!-- <button nz-button nzType="primary" *ngIf="actionStr!='view'" (click)="submitForm('send',true)">发送</button> -->
    <button nz-button nzType="default" (click)='returnBack()' *ngIf="messageId>0">返回</button>
</div>