<form nz-form [formGroup]="validateForm" class="ant-advanced-search-form">
  <div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="8" [style.display]="'block'">
      <nz-form-item nzFlex>
        <nz-form-label [nzFor]="'SearchChrisID'">员工ID</nz-form-label>
        <nz-form-control>
          <!-- 下面的单引号不可省略，否则表单对象找不到对应的表单控件 -->
          <input nz-input [formControlName]="'SearchChrisID'" [attr.id]="'SearchChrisID'" maxlength="30">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="8" [style.display]="'block'">
      <nz-form-item nzFlex>
        <nz-form-label [nzFor]="'SearchCName'">姓名</nz-form-label>
        <nz-form-control>
          <input nz-input [formControlName]="'SearchCName'" [attr.id]="'SearchCName'" maxlength="50">
        </nz-form-control>
      </nz-form-item>
    </div>
    <div nz-col [nzSpan]="8" [style.display]="'block'">
      <nz-form-item nzFlex>
        <nz-form-label [nzFor]="'SearchDepartment'">部门</nz-form-label>
        <nz-form-control>
          <input nz-input [formControlName]="'SearchDepartment'" [attr.id]="'SearchDepartment'" maxlength="50">
        </nz-form-control>
      </nz-form-item>
    </div>
  </div>
  <div nz-row>
    <div nz-col [nzSpan]="24" style="text-align: right;">
      <button nz-button [nzType]="'primary'" (click)="searchUsers()">搜索</button>
      <button nz-button (click)="resetForm()">清空</button>
      <button nz-button [nzType]="'primary'" (click)="addStaticGroupUser()" *ngIf='!isReadonly'>添加</button>
      <button nz-button (click)="backGroup()">返回</button>
    </div>
  </div>
</form>
<!-- 别名不可以和变量同名 -->
<nz-table #users [nzData]="staticGroupUsers" nzShowSizeChanger="false" [nzFrontPagination]="false" [nzLoading]="loading"
  [nzTotal]="total" [(nzPageIndex)]="pageIndex" [(nzPageSize)]="pageSize" (nzPageIndexChange)="getGroupUserList()">
  <thead>
    <tr>
      <th>员工ID</th>
      <th>姓名</th>
      <th>手机</th>
      <th>邮箱</th>
      <th>部门</th>
      <th>帐号权限</th>
      <th>应用权限</th>
      <th>添加时间</th>
      <th>操作</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of users.data">
      <td>{{data.ChrisID}}</td>
      <td>{{data.Name}}</td>
      <td>{{data.MobilePhone}}</td>
      <td>{{data.Email}}</td>
      <td>{{data.Department}}</td>
      <td>{{data.AccountIsDisabledDisplay}}</td>
      <td>{{data.IsDisabledDisplay}}</td>
      <td>{{data.CreationTime}}</td>
      <td>
        <a (click)="viewUser(data.UserID)">查看</a>
        <nz-divider nzType="vertical" *ngIf='!isReadonly'></nz-divider>
        <!-- <a (click)="deleteGroupUser(data.UserID);" *ngIf='!isReadonly'>移除</a> -->
        
        <nz-popconfirm [nzTitle]="'确认移除？'" (nzOnConfirm)="deleteGroupUser(data.UserID)" *ngIf='!isReadonly'>
          <a nz-popconfirm>移除</a>
        </nz-popconfirm>
       
      </td>
    </tr>
  </tbody>
</nz-table>
<nz-modal [(nzVisible)]="isVisible" nzTitle="添加成员" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" [nzOkLoading]="isOkLoading"
  nzMaskClosable="false">
  <label>请输入AD帐号，Email，中文名或英文名</label>
  <br/>
  <nz-select style="width: 100%;" [(ngModel)]="staticUser" nzPlaceHolder="选择用户" nzAllowClear nzShowSearch [nzServerSearch]="true" (nzOnSearch)="onSearch($event)">
    <ng-container *ngFor="let u of userList">
      <nz-option *ngIf="!isLoading" [nzValue]="u.Id" [nzLabel]="u.AD + ' | ' + u.CName + ' | ' + u.EName + ' | ' + u.Email"></nz-option>
    </ng-container>
    <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
      <i nz-icon type="loading" class="loading-icon"></i> 数据加载...
    </nz-option>
  </nz-select>
</nz-modal>
<nz-modal [(nzVisible)]="userIsVisible" nzTitle="用户信息" (nzOnCancel)="closeUserModal()" nzCancelText="关闭" [nzOkText]="null" nzMaskClosable="false" nzWidth="900px">
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24">员工ID</nz-form-label> 
            <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.ChrisID}}</nz-form-control>
          </nz-form-item>
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">性别</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.Sex}}</nz-form-control>
          </nz-form-item>          
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">邮箱</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.Email}}</nz-form-control>
          </nz-form-item>    
          <nz-form-item>
                <nz-form-label [nzSm]="6" [nzXs]="24">职位</nz-form-label> 
                <nz-form-control [nzSm]="18" [nzXs]="24"></nz-form-control>
          </nz-form-item>    
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">上级</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24"></nz-form-control>
          </nz-form-item>    
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">工作地点</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.City}}</nz-form-control>
          </nz-form-item>   
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">状态</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">在职</nz-form-control>
          </nz-form-item>   
      </div>
      <div nz-col [nzSpan]="12">
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">姓名</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.Name}}</nz-form-control>
          </nz-form-item>   
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">手机号码</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.MobilePhone}}</nz-form-control>
          </nz-form-item>   
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">部门</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.Department}}</nz-form-control>
          </nz-form-item>
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">入职日期</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.EmploymentDate}}</nz-form-control>
          </nz-form-item>   
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">出生日期</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24">{{selectUser.Birthday}}</nz-form-control>
          </nz-form-item> 
          <nz-form-item>
              <nz-form-label [nzSm]="6" [nzXs]="24">工作年限</nz-form-label> 
              <nz-form-control [nzSm]="18" [nzXs]="24"></nz-form-control>
          </nz-form-item>        
      </div>
    </div> 
   <!-- <nz-table [nzShowPagination]="false" [nzData]="[1,2,3]">
    <tr>
      <td>员工ID：</td>
      <td>{{selectUser.ChrisID}}</td>
      <td>姓名：</td>
      <td>{{selectUser.Name}}</td>
    </tr>
    <tr>
      <td>性别：</td>
      <td>{{selectUser.Sex}}</td>
      <td>手机号码：</td>
      <td>{{selectUser.MobilePhone}}</td>
    </tr>
    <tr>
      <td>邮箱：</td>
      <td>{{selectUser.Email}}</td>
      <td>部门：</td>
      <td>{{selectUser.Department}}</td>
    </tr>
    <tr>
      <td>职位：</td>
      <td></td>
      <td>入职日期：</td>
      <td>{{selectUser.EmploymentDate}}</td>
    </tr>
    <tr>
      <td>上级：</td>
      <td></td>
      <td>出生日期：</td>
      <td>{{selectUser.Birthday}}</td>
    </tr>
    <tr>
      <td>工作地点：</td>
      <td>{{selectUser.City}}</td>
      <td>工作年限：</td>
      <td></td>
    </tr>
    <tr>
      <td>状态：</td>
      <td>在职</td>
      <td></td>
      <td></td>
    </tr>
  </nz-table>  -->
</nz-modal>
