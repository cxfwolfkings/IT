# 初识python

## 程序语言和自然语言

程序是根据语言提供的指令，按照一定的逻辑顺序，对获得的数据进行运算，并将结果最终返回给我们的指令和数据的组合。在这里运算的含义是广泛的，既包括数学计算之类的操作，比如加减乘除；也包括诸如寻找和替换字符串之类的操作。数据也依据需要的不同，组成不同的形式，处理后的数据，也可能以另一种方式体现。

程序是用语言写成的。语言分高级语言和低级语言。低级语言，有时叫做机器语言或汇编语言。计算机真正“认识”并能够执行的代码，在我们看来是一串0和1组成的二进制数字，这些数字代表指令和数据。想一想早期的计算机科学家就是用这些枯燥乏味的数字编程，其严谨的治学精神令人钦佩。低级语言的出现则是计算机程序语言的一大进步，它用英文单词或单词的缩写代表计算机执行的指令，使编程的效率和程序的可读性都有了较大的提高，但由于它仍然和机器硬件关联紧密，依然不符合人类的语言和思维习惯，而且要想把低级语言写的程序移植到其他平台，很不幸，必须重写。

高级语言的出现是程序语言发展的必然结果，也是计算机语言向人类的自然语言和思维方式逐步靠近和模拟的结果。这一过程现今仍在继续，将来也不会停止。针对不同领域的应用情况，未来会出现更多新的计算机语言。言归正传，高级语言是人类逻辑思维的程序化、数字化和精确化数学描述。逻辑思维是人类思维方式的重要的一部分，但决不是全部，只有这部分计算机能够比较全面、系统地模拟人类的思维方法。由于高级语言是对人类逻辑思维地描述，用它写程序你会感到比较自然，读起来也比较容易，因此，如今的大部分程序都是用高级语言写的。

高级语言的设计的目的是让程序按照人类的思维和语言习惯书写，它是面向人的，不是面向机器的。我们用着方便，但机器却无法读懂它，更谈不上运行了。所以，用高级语言写的程序，必须经过“翻译”程序的处理，将其转换成机器可执行的代码，才能运行在计算机上。如果想把它移植到别的平台上，只需在它的基础上，做少量更改，就可以了。

高级语言翻译成机器代码有两种方法：**解释和编译**。

解释型语言是边读源程序边执行。见下图

![x](./Resource/1.png)
  
而编译型语言则是将源代码编译成目标代码后执行。以后在执行时就不需要编译了。

![x](./Resource/2.png)

程序是由人写成的，所以难免出现错误。跟踪并改正错误的过程叫调试。

程序中可能有三种类型的错误：

1. 语法错误(syntax errors)；
2. 运行错误(runtime errors)；
3. 语义错误(semantic errors)。

调试在某些方面很像破案，面对很少的、凌乱的线索，你必须推测程序实际的执行过程，猜测是什么地方可能导致了错误。

调试是程序员的工作，其目的是使程序按照预定的功能正常运行。但这时的程序还没有最终完成，必须在进行测试。测试则是由另一部分人，他们的目的就是寻找运行程序出现的错误，然后反馈给程序员，由程序员修复错误。这是一个互动的过程。

自然语言是人们日常生活中用于交流的语言，如汉语。

程序语言是人类根据自然语言的一小部分，给计算机设计的，用于人和计算机进行交流的语言。

程序语言和自然语言存在很多区别：

- 模糊性：自然语言充满了模糊性，程序语言则被要求语句的意思必须明确
- 冗余：由于自然语言的模糊性，作者就需要从方方面面对他的真实意图，进行解说，以帮助人们理解正确的意思，结果导致冗余的出现。程序语言很少会出现冗余，因而意思表达地更精确。
- 无修饰：自然语言为了追求感情和修辞上的效果，会在话语中添加许多华丽的词汇，以使感情更加充沛。程序语言则没有这些东西，它一就是一，二就是二，不涉及自然语言的感情和修辞。

## Python简介

### Python的历史

1989年圣诞节：Guido von Rossum开始写Python语言的编译器。

1991年2月：第一个Python编译器（同时也是解释器）诞生，它是用C语言实现的（后面），可以调用C语言的库函数。在最早的版本中，Python已经提供了对“类”，“函数”，“异常处理”等构造块的支持，还有对列表、字典等核心数据类型，同时支持以模块为基础来构造应用程序。

1994年1月：Python 1.0正式发布。

2000年10月16日：Python 2.0发布，增加了完整的[垃圾回收](https://zh.wikipedia.org/wiki/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6_(%E8%A8%88%E7%AE%97%E6%A9%9F%E7%A7%91%E5%AD%B8))，提供了对[Unicode](https://zh.wikipedia.org/wiki/Unicode)的支持。与此同时，Python的整个开发过程更加透明，社区对开发进度的影响逐渐扩大，生态圈开始慢慢形成。

2008年12月3日：Python 3.0发布，它并不完全兼容之前的Python代码，不过因为目前还有不少公司在项目和运维中使用Python 2.x版本，所以Python 3.x的很多新特性后来也被移植到Python 2.6/2.7版本中。

目前我们使用的Python 3.7.x的版本是在2018年发布的，Python的版本号分为三段，形如A.B.C。其中A表示大版本号，一般当整体重写，或出现不向后兼容的改变时，增加A；B表示功能更新，出现新功能时增加B；C表示小的改动（例如：修复了某个Bug），只要有修改就增加C。如果对Python的历史感兴趣，可以阅读名为[《Python简史》](http://www.cnblogs.com/vamei/archive/2013/02/06/2892628.html)的博文。

### Python的优缺点

Python的优点很多，简单的可以总结为以下几点。

1. 简单和明确，做一件事只有一种方法。
2. 学习曲线低，跟其他很多语言相比，Python更容易上手。
3. 开放源代码，拥有强大的社区和生态圈。
4. 解释型语言，天生具有平台可移植性。
5. 对两种主流的编程范式（面向对象编程和函数式编程）都提供了支持。
6. 可扩展性和可嵌入性，例如在Python中可以调用C/C++代码。
7. 代码规范程度高，可读性强，适合有代码洁癖和强迫症的人群。

Python的缺点主要集中在以下几点。

1. 执行效率稍低，因此计算密集型任务可以由C/C++编写。
2. 代码无法加密，但是现在很多公司都不销售卖软件而是销售服务，这个问题会被弱化。
3. 在开发时可以选择的框架太多（如Web框架就有100多个），有选择的地方就有错误。

### Python的应用领域

目前Python在Web应用开发、云基础设施、DevOps、网络数据采集（爬虫）、数据分析挖掘、机器学习等领域都有着广泛的应用，因此也产生了Web后端开发、数据接口开发、自动化运维、自动化测试、科学计算和可视化、数据分析、量化交易、机器人开发、自然语言处理、图像识别等一系列相关的职位。

### 蟒之禅（Python哲学）

> 优美胜过丑陋  
> 明确胜过含蓄  
> 简单胜过复杂  
> 复杂胜过难懂  
> 扁平胜过嵌套  
> 稀疏胜过密集  
> 以动手实践为荣 , 以只看不练为耻;  
> 以打印日志为荣 , 以单步跟踪为耻;  
> 以空格缩进为荣 , 以制表缩进为耻;  
> 以单元测试为荣 , 以人工测试为耻;  
> 以模块复用为荣 , 以复制粘贴为耻;  
> 以多态应用为荣 , 以分支判断为耻;  
> 以Pythonic为荣 , 以冗余拖沓为耻;  
> 以总结分享为荣 , 以跪求其解为耻;

## 搭建编程环境

想要开始Python编程之旅，首先得在自己使用的计算机上安装Python解释器环境，下面将以安装官方的Python解释器为例，讲解如何在不同的操作系统上安装Python环境。官方的Python解释器是用C语言实现的，也是使用最为广泛的Python解释器，通常称之为CPython。除此之外，Python解释器还有Java语言实现的Jython、C#语言实现的IronPython以及PyPy、Brython、Pyston等版本，我们暂时不对这些内容进行介绍，有兴趣的读者可以自行了解。

### Windows环境

可以在[Python官方网站](https://www.python.org/)下载到Python的Windows安装程序（exe文件），需要注意的是如果在Windows 7环境下安装Python 3.x，需要先安装Service Pack 1补丁包（可以通过一些工具软件自动安装系统补丁的功能来安装），安装过程建议勾选"Add Python 3.x to PATH"（将Python 3.x添加到PATH环境变量）并选择自定义安装，在设置"Optional Features"界面最好将"pip"、"tcl/tk"、"Python test suite"等项全部勾选上。强烈建议选择自定义的安装路径并保证路径中没有中文。安装完成会看到"Setup was successful"的提示。如果稍后运行Python程序时，出现因为缺失一些动态链接库文件而导致Python解释器无法工作的问题，可以按照下面的方法加以解决。

如果系统显示api-ms-win-crt*.dll文件缺失，可以参照[《api-ms-win-crt*.dll缺失原因分析和解决方法》](https://zhuanlan.zhihu.com/p/32087135)一文讲解的方法进行处理或者直接在[微软官网](https://www.microsoft.com/zh-cn/download/details.aspx?id=48145)下载Visual C++ Redistributable for Visual Studio 2015文件进行修复；如果是因为更新Windows的DirectX之后导致某些动态链接库文件缺失问题，可以下载一个[DirectX修复工具](https://dl.pconline.com.cn/download/360074-1.html)进行修复。

> 注：可以安装Anaconda发行版，该版本打包了许多python框架，会和python程序一同安装！

### Linux环境

Linux环境自带了Python 2.x版本，但是如果要更新到3.x的版本，可以在[Python的官方网站](https://www.python.org/)下载Python的源代码并通过源代码构建安装的方式进行安装，具体的步骤如下所示（以CentOS为例）。

1. 安装依赖库（因为没有这些依赖库可能在源代码构件安装时因为缺失底层依赖库而失败）。

   ```sh
   yum -y install wget gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel
   ```

2. 下载Python源代码并解压缩到指定目录。

   ```sh
   wget https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tgz
   xz -d Python-3.7.3.tar.xz
   tar -xvf Python-3.7.3.tar
   ```

3. 切换至Python源代码目录并执行下面的命令进行配置和安装。

   ```sh
   cd Python-3.7.3
   ./configure --prefix=/usr/local/python37 --enable-optimizations
   make && make install
   ```

4. 修改用户主目录下名为.bash_profile的文件，配置PATH环境变量并使其生效。

   ```sh
   cd ~
   vim .bash_profile
   ```

   ```sh
   # ... 此处省略上面的代码 ...
   export PATH=$PATH:/usr/local/python37/bin
   # ... 此处省略下面的代码 ...
   ```

5. 激活环境变量。

   ```sh
   source .bash_profile
   ```

### macOS环境

macOS也自带了Python 2.x版本，可以通过[Python的官方网站](https://www.python.org/)提供的安装文件（pkg文件）安装Python 3.x的版本。默认安装完成后，可以通过在终端执行python命令来启动2.x版本的Python解释器，启动3.x版本的Python解释器需要执行python3命令。

## 运行Python程序

### 确认Python的版本

可以Windows的命令行提示符中键入下面的命令。

```sh
python --version
```

或者是在Linux或macOS系统的终端中键入下面的命令。

```sh
python3 --version
```

当然也可以先输入python或python3进入交互式环境，再执行以下的代码检查Python的版本。

```python
import sys

print(sys.version_info)
print(sys.version)
```

### 编写Python源代码

可以用文本编辑工具（推荐使用Sublime、Visual Studio Code等高级文本编辑工具）编写Python源代码并用py作为后缀名保存该文件，代码内容如下所示。

```python
print('hello, world!')
```

### 运行程序

切换到源代码所在的目录并执行下面的命令，看看屏幕上是否输出了"hello, world!"。

```sh
python hello.py
```

或

```sh
python3 hello.py
```

### 代码中的注释

注释是编程语言的一个重要组成部分，用于在源代码中解释代码的作用从而增强程序的可读性和可维护性，当然也可以将源代码中不需要参与运行的代码段通过注释来去掉，这一点在调试程序的时候经常用到。注释在随源代码进入预处理器或编译时会被移除，不会在目标代码中保留也不会影响程序的执行结果。

1. 单行注释 - 以#和空格开头的部分
2. 多行注释 - 三个引号开头，三个引号结尾

```python
"""
第一个Python程序 - hello, world!
向伟大的Dennis M. Ritchie先生致敬

Version: 0.1
Author: 骆昊
"""

print('hello, world!')
# print("你好,世界！")
print('你好', '世界')
print('hello', 'world', sep=', ', end='!')
print('goodbye, world', end='!\n')
```

## Python开发工具

### IDLE - 自带的集成开发工具

IDLE是安装Python环境时自带的集成开发工具，如下图所示。但是由于IDLE的用户体验并不是那么好所以很少在实际开发中被采用。

![x](./Resource/python-idle.png)

### IPython - 更好的交互式编程工具

IPython是一种基于Python的交互式解释器。相较于原生的Python交互式环境，IPython提供了更为强大的编辑和交互功能。可以通过Python的包管理工具pip安装IPython和Jupyter，具体的操作如下所示。

```sh
pip install ipython
```

或

```sh
pip3 install ipython
```

安装成功后，可以通过下面的ipython命令启动IPython，如下图所示。

![x](./Resource/python-ipython.png)

### Sublime Text - 高级文本编辑器

![x](./Resource/python-sublime.png)

- 首先可以通过[官方网站](https://www.sublimetext.com/)下载安装程序安装Sublime Text 3或Sublime Text 2。
- 安装包管理工具。
  - 通过快捷键Ctrl+`或者在View菜单中选择Show Console打开控制台，输入下面的代码。

    Sublime 3：

    ```sh
    import  urllib.request,os;pf='Package Control.sublime-package';ipp=sublime.installed_packages_path();urllib.request.install_opener(urllib.request.build_opener(urllib.request.ProxyHandler()));open(os.path.join(ipp,pf),'wb').write(urllib.request.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read())
    ```

    Sublime 2：

    ```sh
    import  urllib2,os;pf='Package Control.sublime-package';ipp=sublime.installed_packages_path();os.makedirs(ipp)ifnotos.path.exists(ipp)elseNone;urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler()));open(os.path.join(ipp,pf),'wb').write(urllib2.urlopen('http://sublime.wbond.net/'+pf.replace(' ','%20')).read());print('Please restart Sublime Text to finish installation')
    ```

  - 在浏览器中输入 [https://sublime.wbond.net/Package%20Control.sublime-package](https://sublime.wbond.net/Package%20Control.sublime-package) 下载包管理工具的安装包，并找到安装Sublime目录下名为"Installed Packages"的目录，把刚才下载的文件放到这个文件加下，然后重启Sublime Text就搞定了。

- 安装插件。通过Preference菜单的Package Control或快捷键Ctrl+Shift+P打开命令面板，在面板中输入Install Package就可以找到安装插件的工具，然后再查找需要的插件。我们推荐大家安装以下几个插件：

  - SublimeCodeIntel - 代码自动补全工具插件。
  - Emmet - 前端开发代码模板插件。
  - Git - 版本控制工具插件。
  - Python PEP8 Autoformat - PEP8规范自动格式化插件。
  - ConvertToUTF8 - 将本地编码转换为UTF-8。

> 说明：事实上[Visual Studio Code](https://code.visualstudio.com/)可能是更好的选择，它不用花钱并提供了更为完整和强大的功能，有兴趣的读者可以自行研究。

### PyCharm - Python开发神器

PyCharm的安装、配置和使用在[《玩转PyCharm》](https://github.com/jackfrued/Python-100-Days/blob/master/%E7%8E%A9%E8%BD%ACPyCharm.md)进行了介绍，有兴趣的读者可以选择阅读。

![x](./Resource/python-pycharm.png)

## 练习

1. 在Python交互式环境中输入下面的代码并查看结果，请尝试将看到的内容翻译成中文。

   ```python
   import this
   ```

   > 说明：输入上面的代码，在Python的交互式环境中可以看到Tim Peter撰写的"Python之禅"，里面讲述的道理不仅仅适用于Python，也适用于其他编程语言。

2. 学习使用turtle在屏幕上绘制图形。

   > 说明：turtle是Python内置的一个非常有趣的模块，特别适合对计算机程序设计进行初体验的小伙伴，它最早是Logo语言的一部分，Logo语言是Wally Feurzig和Seymour Papert在1966发明的编程语言。

   ```python
   import turtle

   turtle.pensize(4)
   turtle.pencolor('red')

   turtle.forward(100)
   turtle.right(90)
   turtle.forward(100)
   turtle.right(90)
   turtle.forward(100)
   turtle.right(90)
   turtle.forward(100)

   turtle.mainloop()
   ```

   > 提示：本章提供的代码中还有画国旗和画小猪佩奇的代码，有兴趣的读者请自行研究。
