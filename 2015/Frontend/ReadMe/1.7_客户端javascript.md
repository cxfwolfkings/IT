# 客户端javascript

## 4.事件处理

事件|说明
-|-
keydown|当用户按下键盘上的任意键时触发，如果按住不放的话，会重复触发此事件
keypress|当用户按下键盘上的<b style="color:red">字符</b>键时触发，如果按住不让的话，会重复触发此事件
keyup|当用户释放键盘上的字符键时触发

> 那么对应的keyCode（键码）和charCode（字符编码）是什么样子的呢？
> 
> 1、在发生keydown和keyup事件时，event对象的keyCode属性会包含一个代码，与键盘上的一个特定的键对应。对数字字母键，keyCode属性的值与ASCII码中对应小写字母或者数字的编码相同
> 
> 2、发生keypress事件意味着按下的键会影响到屏幕中文本的显示。在所有的浏览器中，按下能够插入或者删除字符的键都会触发keypress事件。IE9，FireFox、Chrome和Safari的event对象都支持一个charCode属性，这个属性只有在发生keypress事件时，才包含值，而且这个值是按下的那个键所代表的字符的ASCII编码。此时的keyCode通常等于0或者也可能等于所按键的键码。
> 
> 按下键盘会触发键盘事件，顺序依次为：keydown->keypress->keyup.
>
> 3、keydown、keypress事件触发时文字还没敲进文本框，就像上面的keypress事件，只是按下字符键显示的结果，即得到的是触发键盘事件前的文本。而keyup是事件触发整个键盘事件的操作已经完成，获得的是触发键盘事件后的文本。
>
> keypress与keydown与keyup的主要区别：  
>（1）对中文输入法不友好，无法响应中文输入；  
>（2）无法响应系统功能键（比如delete，backspace）；  
>（3）由于前面两个限制，keypress与keydown和keyup不是很一致；
>
> 在keyup中无法是无法阻止浏览器的默认事件的，因为在keypress时，浏览器默认行为已经完成，即将输入字符输入文本框（尽管这时还没有显示），这个时候不管是preventDefault还是return false，都不能阻止在文本框中输入文字的行为，如要阻止在文本框中输入文字，必须在keydown或者keypress时，即时阻止。
>
> 4、textInput事件
> 
> 文本框的键盘响应事件把textInpput也加进来，触发的顺序为：keydown -> keypress ->textInput -> keyup
> 
> textInput事件是DOM3后支持的，主要用来替换keypress，与keypress的主要差别在于添加了对中文输入法的支持，还有一点就是textInput只在可编辑文本区才能触发（如input、textarea），而keypress是任何能获得焦点的控件的能触发（如button），但是textInput事件的支持还不是很好，目前只有safari、chrome支持。
